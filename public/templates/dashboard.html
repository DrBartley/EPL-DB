<body ng-controller="AppController">
    <link rel="stylesheet" type="text/css" href="dash.css" />
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="background-color: {{myColour}}">
        <div class="navbar-header">
            <a class="navbar-brand">EPLDB</a>
        </div>

        <div id="epl_navbar_nav" class="collapse navbar-collapse">
            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" focus-on="focusMe" ng-model="team" typeahead="name for name in teamnames | filter:$viewValue" typeahead-editable="false">
                </div>
            </form>
            <span ng-if="settingsToggle">
                <div class="btn-group" id="top-toggles">
                    <button type="button" class="btn btn-default color3" ng-model="$storage.badge" btn-checkbox>Badges</button>
                    <button type="button" class="btn btn-default color3" ng-model="$storage.prematch" btn-checkbox>Prematch Text</button>
                    <button type="button" class="btn btn-default color3" ng-model="$storage.leaguetable" btn-checkbox>League Table</button>
                    <button type="button" class="btn btn-default color3" ng-model="$storage.oppoform" btn-checkbox>Opponent Form</button>
                </div>
            </span>
            <ul class="nav navbar-nav" id="home-nav-text">
                <li><a href="/">Overview</a>
                </li>
                <li><a href="/match">Match Mode</a>
                </li>
                <li><a href="#" ng-model="settingsToggle" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">Settings</a>
                </li>
            </ul>
        </div>
    </nav>
    <div id="top-left">

        <span ng-if="$storage.badge==true">
            <div class="col-lg-3" id="badge-div">
                <img id="badgey" ng-src="images/{{badgehash}}" />
            </div>
        </span>
        <span ng-if="$storage.badge==false">
            <div class="col-lg-3" id="badge-holder-div">
            </div>
        </span>
        <div class="col-lg-6" id="mega-div">

            <nvd3-line-chart data="megajson" id="megajson" width="760" height="340" showXAxis="false" margin="{left:0,top:0,bottom:0,right:0}" showYAxis="false" interactive="true" tooltips="true" showLegend="true">
                <svg id="megachart" viewBox="0 0 760 340" preserveAspectRatio="xMidYMid"></svg>
            </nvd3-line-chart>
        </div>
        <span ng-if="$storage.leaguetable">
            <div class="col-lg-3" id="dash-table-div">
                <table class="table table-hover">
                    <tr>
                        <th>Team</th>
                        <th>Pl.</th>
                        <th>W</th>
                        <th>D</th>
                        <th>L</th>
                        <th>GD</th>
                        <th>Points</th>
                    </tr>
                    <tr ng-repeat="t in premtable" ng-class="{success: t.team==team}">
                        <td>{{t.team}}</td>
                        <td class="table-points">{{t.played}}</td>
                        <td class="table-points">{{t.won}}</td>
                        <td class="table-points">{{t.drawn}}</td>
                        <td class="table-points">{{t.lost}}</td>
                        <td class="table-points">{{t.difference}}</td>
                        <td class="table-points">{{t.points}}</td>
                    </tr>
                </table>
                <!-- <nvd3-line-chart data="liveposs" id="liveposs" interactive="true" tooltips="true" margin="{left:0,top:0,bottom:5,right:25}" width="500" height="400" showXAxis="false" showYAxis="false" showLegend="true"><svg id="poss-svg"></svg></nvd3-line-chart> -->
            </div>
    </div>

    </span>
    <div id="floaty">
        <div id="flex-container">
            <div class="flex">
                <div class="col-lg-3" id="fix-and-table">
                        <table class="table table-hover" id="fixturestable">
                            <tr ng-repeat="fix in fixtures | limitTo:8">
                                <td>{{fix.home}} vs. {{fix.away}}
                                    <br />
                                    <span class="fixdate">{{fix.date}}</span>
                                </td>
                            </tr>
                        </table>
                </div>

                <div class="col-lg-3" id="dash-form">
                    <h2 ng-repeat="f in form" style="background-color: {{myColour}}" id="form-column">
                        {{f.form}}
                    </h2>
                    <span ng-if="$storage.prematch">
                        <div class="prematch">
                            <p>{{prematchsing.text}}</p>
                        </div>
                    </span>
                    <span ng-if="$storage.oppoform">
                        <h2 ng-repeat="f in otherform" style="background-color: {{otherColour}}" id="other-form-column">
                            {{f.form}}
                        </h2>
                        <br>
                    </span>
                    <table class="table table-hover" id="scorers">
                        <tr>
                            <th>Name</th>
                            <th id="scorer-goals">Goals</th>
                        </tr>
                        <tr ng-repeat="s in scorers track by $index">
                            <td>{{s.player}}</td>
                            <td id="scorer-goals">{{s.goals}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="livescores">
                <p class="lead" ng-repeat-start="score in fullscores">{{score.teams}}
                    <span class="score">{{score.score}}</span>
                </p>
                <p ng-repeat-end=""></p>
            </div>
        </div>
    </div>
    </div>
</body>
